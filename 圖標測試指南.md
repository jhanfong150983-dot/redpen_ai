# 圖標測試指南

## 伺服器已啟動 ✅

**新網址**: http://localhost:4174/

(端口從 4173 改為 4174,因為之前的端口還在使用中)

---

## 快速測試步驟

### 1️⃣ **開啟瀏覽器**

在 Chrome 或 Edge 輸入:
```
http://localhost:4174/
```

---

### 2️⃣ **檢查瀏覽器標籤圖標 (Favicon)**

**位置**: 瀏覽器標籤左側

**預期看到**:
- ✅ 顯示 RedPen AI 的圖標 (不是預設的網頁圖標)
- ✅ 圖標清晰可見

**如何確認**:
- 開啟多個標籤頁對比
- RedPen AI 標籤應該有自己的圖標

---

### 3️⃣ **檢查 PWA Manifest 圖標**

#### 步驟 3.1: 打開開發者工具

按 `F12` → 切換到 **Application** 分頁

#### 步驟 3.2: 查看 Manifest

1. 左側選單點擊 **Manifest**
2. 向下滾動到 **Icons** 區域

**預期看到 4 個圖標**:

| 圖標 | 尺寸 | 用途 |
|------|------|------|
| pwa-64x64.png | 64x64 | 小尺寸 |
| pwa-192x192.png | 192x192 | Android 標準 |
| pwa-512x512.png | 512x512 | 高解析度 (any) |
| maskable-icon-512x512.png | 512x512 | Android 適應性 (maskable) |

**每個圖標都應該**:
- ✅ 有預覽圖 (點擊可放大查看)
- ✅ 顯示正確的尺寸
- ✅ Type: image/png

---

### 4️⃣ **檢查 Cache Storage 圖標**

1. 在 **Application** 分頁
2. 左側展開 **Cache Storage**
3. 點開 `workbox-precache-v2-http://localhost:4174/`

**預期看到更多文件 (從 15 增加到 25)**:

新增的圖標文件:
- ✅ `/pwa-64x64.png`
- ✅ `/pwa-192x192.png`
- ✅ `/pwa-512x512.png`
- ✅ `/maskable-icon-512x512.png`
- ✅ `/apple-touch-icon-180x180.png`
- ✅ `/favicon.ico`

**如何驗證**:
- 點擊任一圖標文件
- 右側會顯示預覽
- 檢查圖標是否清晰

---

### 5️⃣ **測試 Apple Touch Icon (iOS 模擬)**

雖然在桌面瀏覽器無法完整測試 iOS 功能,但可以檢查配置:

#### 方法 A: 查看 HTML 源碼

1. 在頁面右鍵 → **檢視網頁原始碼**
2. 搜尋 `apple-touch-icon`

**預期看到**:
```html
<link rel="apple-touch-icon" href="/apple-touch-icon-180x180.png" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-title" content="RedPen AI" />
```

#### 方法 B: 直接訪問圖標

在瀏覽器開新分頁,輸入:
```
http://localhost:4174/apple-touch-icon-180x180.png
```

**預期看到**:
- ✅ 顯示 180x180 的 RedPen AI 圖標
- ✅ 圖標清晰,背景透明或白色

---

### 6️⃣ **測試 Maskable Icon (Android 適應性圖標)**

#### 使用 Maskable.app 線上工具

1. 開新分頁前往: https://maskable.app/editor
2. 上傳您的圖標: `c:\Users\GPPS\Downloads\redpen_ai-main\public\maskable-icon-512x512.png`
3. 測試不同形狀的遮罩

**預期結果**:
- ✅ 圖標在圓形、方形、圓角方形遮罩下都清晰可見
- ✅ 重要內容不會被裁切
- ✅ 中心 80% 區域 (安全區) 內的內容完整

---

### 7️⃣ **測試安裝 PWA (桌面)**

#### Chrome 測試:

1. 在網址列右側找到 **安裝圖標** (⊕ 或 電腦圖示)
2. 點擊 "安裝 RedPen AI"

**預期行為**:
- ✅ 出現安裝對話框
- ✅ 顯示 App 名稱: "RedPen AI - 作業批改"
- ✅ 顯示圖標預覽
- ✅ 點擊「安裝」後,在新視窗開啟
- ✅ 視窗標題列顯示 RedPen AI 圖標

#### 安裝後檢查:

**Windows**:
- 開始選單搜尋 "RedPen AI"
- 應該出現已安裝的 PWA
- 圖標顯示正確

**快捷方式**:
- 桌面可能會出現快捷方式
- 圖標清晰可見

---

## 進階測試 (可選)

### 測試 8: Lighthouse PWA 審計

1. 按 `F12` → **Lighthouse** 分頁
2. 選擇:
   - Categories: **Progressive Web App** (勾選)
   - Device: **Mobile**
3. 點擊 **Analyze page load**

**預期分數**:
- ✅ PWA: **100 分** (或接近)

**關鍵檢查項目**:
- ✅ "Provides a valid `apple-touch-icon`" (通過)
- ✅ "Manifest includes icons at 192px and 512px" (通過)
- ✅ "Has a `<meta name="viewport">` tag" (通過)

---

### 測試 9: 不同設備圖標測試

如果您有 Android 手機:

1. 確保手機與電腦在同一網路
2. 在終端機執行:
   ```bash
   npm run preview -- --host
   ```
3. 手機瀏覽器訪問顯示的網路 IP (例: `http://192.168.1.100:4174`)
4. 安裝 PWA 到主畫面
5. 檢查主畫面圖標是否清晰

---

## 測試檢查清單

完成測試後,確認:

### 基本檢查:
- [ ] 瀏覽器標籤顯示正確的 favicon
- [ ] Manifest 包含 4 個圖標 (64, 192, 512, maskable)
- [ ] Cache Storage 有 25 個文件 (包含新圖標)

### 圖標品質:
- [ ] 所有圖標清晰可見 (不模糊)
- [ ] Maskable icon 在各種形狀遮罩下完整
- [ ] Apple touch icon 可正常載入

### PWA 功能:
- [ ] 可以安裝到桌面
- [ ] 安裝後圖標顯示正確
- [ ] Lighthouse PWA 分數 ≥ 90

---

## 常見問題

### Q1: 瀏覽器標籤還是顯示舊圖標?

**解決方法**:
1. 清除瀏覽器快取:
   - `Ctrl + Shift + Delete` → 清除快取
2. 硬重新整理:
   - `Ctrl + Shift + R` 或 `Ctrl + F5`
3. 重新啟動瀏覽器

---

### Q2: Manifest 圖標顯示 "Failed to load"?

**檢查步驟**:
1. 確認圖標文件存在:
   ```bash
   ls public/pwa-*.png public/maskable-*.png
   ```
2. 重新建置:
   ```bash
   npm run build
   npm run preview
   ```

---

### Q3: 無法安裝 PWA?

**可能原因**:
- Service Worker 尚未註冊完成
- Manifest 配置有誤

**檢查方法**:
1. `F12` → **Application** → **Service Workers**
   - 確認狀態: **activated**
2. `F12` → **Application** → **Manifest**
   - 確認所有欄位都有值
   - Icons 有預覽圖

---

## 測試完成後

**發現問題**: 告訴我具體哪個圖標有問題,或哪個測試項目失敗

**測試通過**: 我們可以繼續第三階段 (PWABuilder 打包)

---

**停止伺服器**: 測試完成後,按 `Ctrl + C` 停止預覽伺服器

**準備好了嗎?開始測試吧!** 🎨
